<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
body, html, #allmap {
	width: 100%;
	height: 100%;
	margin: 0;
	font-family: "微软雅黑";
}

#l-map {
	height: 300px;
	width: 100%;
}

#r-result {
	width: 100%;
}
</style>
<title>根据多关键字本地搜索</title>
</head>
<body>
	<div id="l-map"></div>
	<div id="r-result"></div>
</body>
</html>
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=02a0bb2a75c0c3bdba271c43299917e3"></script>
<!-- jQuery 2.1.4 -->
 <script src="../../../jslib/jQuery/jQuery-2.1.4.min.js"></script>
 <!-- Bootstrap 3.3.5 -->
 <script src="../../../jslib/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
	var str = window.parent.document.getElementById('mapKeys').value;
	var map;
	var local;
	var myKeys = [str];
	map = new BMap.Map("l-map");
	local = new BMap.LocalSearch(map, {
		renderOptions : {
			map : map,
			panel : "r-result"
		},
		pageCapacity : 5
	});
	local.searchInBounds(myKeys, map.getBounds());
	//var map1 = new BMap.Map("allmap");
	map.addEventListener("click", showInfo);
	map.enableScrollWheelZoom(); //启用滚轮放大缩小，默认禁用
	map.enableContinuousZoom();

	function showInfo(e) {

		parent.document.getElementById('code').value=e.point.lng + "," + e.point.lat;
		$(window.parent.document).find("#modalClose").click();
	}
</script>