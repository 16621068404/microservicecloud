<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>工作中心</title>
<!-- Tell the browser to be responsive to screen width -->
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport">
<link rel="stylesheet"href="../../../jslib/leanway/loader_datatables.css">
<link href="../../../jslib/zTree/css/zTreeStyle/zTree.css" rel="stylesheet"
	type="text/css" />
<link rel="stylesheet"href="../../../jslib/zTree/css/demo.css"
	type="text/css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

<style type="text/css" mce_bogus="1">
table th {
	white-space: nowrap;
}

table td {
	white-space: nowrap;
}
</style>
</head>
<body style="overflow-y: auto;"
	class="hold-transition skin-blue-light sidebar-mini">
	<!-- header -->
	<!-- <div style="height: 42px;">
		<section class="content-header">
			<ol class="breadcrumb">
				<li><i class="fa fa-home"></i></li>
				<li class="active">生产基础资料</li>
				<li class="active">工作中心</li>
				<li class="active"></li>
			</ol>
		</section>
	</div> -->
	<!-- <div> -->
		<!-- Your Page Content Here -->
		<section class="content">
			<div class="col-sm-4">
				<div class="box box-primary">
					<div class="box-header with-border">
						<h3 class="box-title">工作中心</h3>&nbsp;
						<button class="btn btn-default btn-flat  btn-xs" data-toggle="modal"
								onclick="addWorkCenter()" id="addFun">新增</button>
							<button class="btn btn-default btn-flat  btn-xs" onclick="updateWorkCenter()"
								id="editFun">修改</button>
			<!-- 				<button class="btn btn-default btn-flat  btn-xs" onclick="deleteWorkCenter()"
								id="delFun">删除</button> -->

						<div class="btn-group">
				      		<button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-default btn-flat btn-xs dropdown-toggle" type="button" id="delFun">删除 <span class="caret"></span></button>
				     			<ul class="dropdown-menu">
							        <li><a onclick="deleteWorkCenter(1)" id="deleteCurrentFun">当前选中数据</a></li>
				      			    <li><a onclick="deleteWorkCenter(2)" id="deleteAllFun">跨页选中数据</a></li>
						      </ul>
				    	</div>
				    	<!-- <button class="btn btn-default btn-flat  btn-xs" onclick="addCenterEmployee()"
						id="contactFun">关联用户</button> -->
						<div class="box-tools pull-right">
							<button class="btn btn-box-tool" data-widget="collapse">
								<i class="fa fa-minus"></i>
							</button>
						</div>
					</div>
					<div class="box-body">
						<div class="form-horizontal clearfix">

							<div class="col-lg-12 col-sm-12 input-group">
								<input type="text" placeholder="请输入关键字" id="searchValue"
									name="searchValue" class="input-sm form-control"> <span
									class="input-group-btn"><button type="button"
										class="btn btn-sm btn-primary" onclick="searchWorkCenter()">
										搜索</button> </span>
							</div>

						</div>
						<table id="generalInfo"
							class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<td style="width: 15px"><input type="checkbox"
										id="checkAll"
										onclick="com.leanway.dataTableCheckAll('generalInfo', 'checkAll', 'checkList')"
										class="regular-checkbox"><label for="checkAll"></label></td>
									<td>工作中心编码</td>
									<td>工作中心名称</td>
									<td>用户</td>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="col-sm-8">
				<form class="form-horizontal" id="workCenterForm"
					name="workCenterForm">
					<div class="box box-primary">
						<div class="box-header with-border">
							<h3 class="box-title">工作中心</h3>&nbsp;
							<button class="btn btn-default btn-flat  btn-xs" type="button" id="saveOrUpdate"
									onclick="saveWorkCenter()">保存</button>
							<div class="box-tools pull-right">
								<a class="btn btn-box-tool" data-widget="collapse"> <i
									class="fa fa-minus"></i>
								</a>
							</div>
						</div>

						<div class="box-body">
							<div class="col-sm-6">
								<div class="form-group">

									<div class="col-sm-4">
										<input class="form-control" id="equipVal" name="equipVal"
											type="hidden" placeholder="台账数据" /> <input
											class="form-control" id="workcenterpath"
											name="workcenterpath" type="hidden" placeholder="台账数据" />
									</div>
									<div class="col-sm-4">
										<input class="form-control" id="centerid" name="centerid"
											type="hidden" placeholder="工作中心编号" />
									</div>
									<div class="col-sm-4">
										<input class="form-control" id="compid" name="compid"
											type="hidden" placeholder="公司编号" />
									</div>
									<label class="col-sm-4 control-label" for="centername">工作中心编码</label>
									<div class="col-sm-8 ">
										<input class="form-control" id="centername" name="centername"
											type="text" style="border-color: #3c8dbc;"
											onblur="queryIsWorkCenterExsit()" />
									</div>

								</div>
								<div class="form-group">
									<label class="col-sm-4 control-label" for="shorname">工作中心名称</label>
									<div class="col-sm-8">
										<input class="form-control" id="shorname" name="shorname"
											type="text" style="border-color: #3c8dbc;" />
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-4 control-label" for="groupid">工作中心组</label>
									<div class="col-sm-8 ">
										<select class="form-control" id="groupid" name="groupid"
											style="border-color: #3c8dbc;"></select>
									</div>

								</div>
								<div class="form-group">

									<label class="col-sm-4 control-label" for="centrtype">工作中心类型</label>
									<div class="col-sm-8 ">
										<select class="form-control" id="centrtype" name="centrtype"
											style="border-color: #3c8dbc;" onchange="addEquip()"></select>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-4 control-label" for="argid">派工参数</label>
									<div class="col-sm-8">
										<select class="form-control" id="argid" name="argid"
											style="border-color: #3c8dbc;"></select>
									</div>

								</div>
								<div class="form-group">
                                    <label class="col-sm-4 control-label" for="calendarid">工作日历</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="calendarid" name="calendarid"
                                            style="border-color: #3c8dbc;"></select>
                                    </div>
                                </div>
						<!-- 	<div class="form-group">
									<label class="col-sm-4 control-label" for="length">长</label>
									<div class="col-sm-7">
										<input class="form-control" id="length" name="length"
											type="text" />
									</div>
									<div style="padding-top: 8px;">米</div>
								</div>
								<div class="form-group">
									<label class="col-sm-4 control-label" for="width">宽</label>
									<div class="col-sm-7">
										<input class="form-control" id="width" name="width"
											type="text" />
									</div>
									<div style="padding-top: 8px;">米</div>
								</div> -->
								<div class="form-group">

									<label class="col-sm-4 control-label" for="barcode">条码</label>
									<div class="col-sm-8">
										<input class="form-control" id="barcode" name="barcode"
											type="text" />
									</div>
								</div>
								<div class="form-group">

									<label class="col-sm-4 control-label" for="resourcescount">资源数</label>
									<div class="col-sm-8 ">
										<input class="form-control" id="resourcescount"
											name="resourcescount" type="text"
											style="border-color: #3c8dbc;" onchange="addEquip()" />
									</div>
								</div>
								<div class="form-group">

										<label class="col-sm-4 control-label" for="mainworkcenter">关键工作中心</label>
										<div class="col-sm-8 ">
											<input id="mainworkcenter0" name="mainworkcenter" type="radio"
												value="1"/>是 <input id="mainworkcenter1"
												name="mainworkcenter" type="radio" value="0" checked/>否
										</div>

								</div>

								<!--
								<div class="form-group">

									<label class="col-sm-4 control-label" for="shutdownreasonid">停机原因</label>
									<div class="col-sm-8 ">

									<select id="shutdownreasonid" name="shutdownreasonid"
											class="form-control select2"  style="width: 100%" multiple="multiple" >
										</select> <input class="form-control" id="reasoncode"
											name="reasoncode" type="hidden" />
									</div>
								</div>
								-->
							</div>
							<div class="col-sm-6">
								<form enctype="multipart/form-data" method="post">
									<div class="col-sm-2">
									</div>
									<div class="col-sm-3">
										<div id="workCenterPathPhotoId">
											<button class="fileUpload btn btn-primary btn-xs"
												onclick="selectFile('path')"><li class="fa fa-folder-open">&nbsp;选择图片</li></button>
											<input type="file" id="path" name="path"
												style="height: 0px; width: 0px;">
										</div>
									</div>
									<div class="col-sm-7">
										<button id="workCenterId" type="button"
											class="btn btn-danger btn-xs" onclick="uploadFunc('path');"><li class="fa fa-upload">&nbsp;上
											传</li></button>
									</div>
								</form>
								<div class="col-sm-12">
									<label class="col-sm-12 " style="margin-left:80px">预览</label><br>&nbsp;
									<div class="col-xs-12">
										<div class="showImgDiv" id="showImgSpaceId" style="margin-left:80px">
											<img src="../../../lnfiles/upload/noimg.jpg" id="imageId"  style="height: 120px;">
										</div>
									</div>
								</div>
								<div class="col-sm-12" style="height:105px">


                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                    <label class="col-sm-3 control-label" for="length">长</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="length" name="length"
                                            type="text" />
                                    </div>
                                    <div style="padding-top: 8px;">米</div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label" for="width">宽</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="width" name="width"
                                            type="text" />
                                    </div>
                                    <div style="padding-top: 8px;">米</div>
                                </div>

                                <div class="form-group">
	                                <label class="col-sm-3 control-label" for="dailymaxcapacity">日最大产能</label>
											<div class="col-sm-8 ">
												<input class="form-control" id="dailymaxcapacity"
												name="dailymaxcapacity" type="text"/>
											</div>
											<div style="padding-top: 8px;">公斤</div>
	                                </div>
                                </div>
							</div>
						</div>

				</form>

			</div>
			<div class="box box-primary">
				<div class="box-header with-border">
					<h3 class="box-title">设备台账</h3>
					<button type="button" id="addEquipButton"
						class="btn btn-default btn-sm"
						onclick="addEquipment();addResourcecount()">
						<i class="fa fa-plus"></i>&nbsp;添加
					</button>
					</h3>
					<div class="box-tools pull-right">
						<a class="btn btn-box-tool" data-widget="collapse"> <i
							class="fa fa-minus"></i>
						</a>
					</div>
				</div>
				<div class="box-body">
					<div class="form-group">

						<label class="col-sm-2 control-label" for="resourcescount">完好工时</label>
						<div class="col-sm-4 ">
							<input class="form-control" id="uptime" name="uptime" type="text"
								style="border-color: #3c8dbc;" readonly="readonly" />
						</div>
					</div>

				</div>

				<div class="box-body table-responsive no-padding">
					<table id="grid-data" class="table table-striped table-bordered table-hover">
						<thead id="tableHead">
						</thead>
						<tbody id="tableBody">
						</tbody>
					</table>
				</div>
			</div>


			<div class="box box-primary">
				<div class="box-header with-border">
					<h3 class="box-title">停机原因</h3>
					<div class="box-tools pull-right">
						<a class="btn btn-box-tool" data-widget="collapse"> <i
							class="fa fa-minus"></i>
						</a>
					</div>
				</div>
				<div class="box-body">
					<table id="shutDownInfo"
						class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<td style="width: 15px"><input type="checkbox"
									id="checkAllShutDown"
									onclick="com.leanway.dataTableCheckAll('shutDownInfo', 'checkAllShutDown', 'checkListShutDown')"
									class="regular-checkbox"><label for="checkAllShutDown"></label></td>
								<td>停机原因</td>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
			<div class="box box-primary">
			<form class="form-horizontal" id="addressForm"
                    name="addressForm">
                            <div class="box-header with-border">
                                <h3 class="box-title">地址</h3>
                                <div class="box-tools pull-right">
                                    <a class="btn btn-box-tool" data-widget="collapse"> <i
                                        class="fa fa-minus"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="box-body">

                                <div class="form-group">
                                    <label class="col-sm-2 control-label">地址</label>
                                    <div class="col-sm-2">
                                        <select class="form-control" id="provinceId"></select>
                                    </div>
                                    <div class="col-sm-2">
                                        <select class="form-control" id="cityId"></select>
                                    </div>
                                    <div class="col-sm-2">
                                        <select class="form-control" id="districtId"></select>
                                    </div>

                                </div>

                                <div class="form-group">
                                	 <label class="col-sm-2 control-label"></label>
                                	 <div class="col-sm-3">
                                        <!-- registAddress 用于存放Address中详细地址 ，company中存放addressId-->
                                        <input class="form-control" id="registAddress"
                                            name="registAddress" type="text" placeholder="详细地址" /> <input
                                            class="form-control" id="addressid" name="addressid"
                                            type="hidden" />
                                    </div>
                                    &nbsp;
                                     <div class="col-sm-3">

                                        <input class="form-control" id="code" name="code" value=""
                                            type="text" placeholder="选择经纬度"/>
                                    </div>
                                    <div class="col-sm-2">
                                        <!-- registAddress 用于存放Address中详细地址 ，company中存放addressId-->
                                        <button type="button" class="btn btn-primary btn-sm"
                                            onclick="getCode()" id="Code">获取经纬度</button>

                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 control-label" for="maplevels">内部地址</label>
                                    <div class="col-sm-4">
                                        <input class="form-control" id="maplevels" name="maplevels"
                                            type="text" />
                                    </div>
                                    &nbsp;
                                    <button type="button" class="btn btn-primary btn-sm"
                                        onclick="showMenu(); return false;" id="menuBtn">选择</button>
                                </div>
                            </div>
                            </form>
                        </div>

		</section>
	<!-- </div> -->
	<div id="menuContent" class="menuContent"
		style="display: none; position: absolute;">
		<ul id="treeDemo" class="ztree" style="margin-top: 0; width: 160px;"></ul>
	</div>
	
	<div class="modal fade bs-example-modal-lg" id="userModal"
		tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">关联用户</h4>
				</div>

				<div class="modal-body">

					<div class="box-body">

						<div class="col-sm-12">

							<div class="form-horizontal clearfix">
								<div class="col-lg-12 col-sm-12 input-group">
									<input type="text" placeholder="请输入关键字"
										id="userSearchValue" name="userSearchValue"
										class="input-sm form-control"> <span
										class="input-group-btn"><button type="button"
											class="btn btn-sm btn-primary" onclick="searchUsers()">
											搜索</button> </span>
								</div>
							</div>
							<table id="userTables"
								class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th style="width: 15px"><input type="checkbox"
											id="userCheckAll" class="regular-checkbox"
											onclick="com.leanway.dataTableCheckAll('userTables', 'userCheckAll', 'userCheckList');"><label
											for="employeeCheckAll"></label></th>
										<th>用户名</th>
										<th>雇员名</th>
									</tr>
								</thead>
							</table>
						</div>
					</div>

				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-default" id="modalClose"
						data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary"
						id="saveUserDispatching" onclick="saveCenterUser()">关联</button>
				</div>

			</div>
		</div>
	</div>
	
	<div class="modal fade" id="tipModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">

				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">提示</h4>
				</div>

				<div class="modal-body" id="tips"></div>
				<div class="modal-footer" id="sure"></div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="imageModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">

				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">图片</h4>
				</div>

				<div class="modal-body" id="img">
					<form enctype="multipart/form-data" method="post">
						<div class="col-sm-2">
							<div>
								<div id="selectId" class="fileUpload btn btn-primary btn-xs"
									onclick="selectFile('equippath')">选择图片</div>
								<input type="file" id="equippath" name="equippath"
									style="height: 0px; width: 0px;">
							</div>
						</div>
						<div class="col-sm-10">
							<button id="uploadButton" type="button"
								class="btn btn-danger btn-xs" onclick="upload('equippath');">上
								传</button>
						</div>
					</form>
					<label class="col-sm-12 ">预览</label><br>&nbsp;
					<div>
						<img src="../../../lnfiles/upload/noimg.jpg" id="image" style="height: 120px;">
					</div>
				</div>
				<div class="modal-footer" id="sure">
					<button type='button' class='btn btn-primary' data-dismiss='modal'>关闭</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" style="width:800px;height:600px;" >
			<div class="modal-content">

				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="modalLabel">地图</h4>
				</div>
				<div class="modal-body" align="center">

				<input type="hidden" id="mapKeys" value="">
				<iframe id="mapFrame"  style="width:700px;height:500px;" src=""></iframe>

				</div>
				<div class="modal-footer" align="center">
					<button type="button" class="btn btn-primary" id="modalClose"
						data-dismiss="modal">关闭</button>
				</div>

			</div>
		</div>
	</div>
	<!-- jQuery 2.1.4 -->
	<script src="../../../jslib/jQuery/jQuery-2.1.4.min.js"></script>
	<!-- Bootstrap 3.3.5 -->
	<script src="../../../jslib/bootstrap/js/bootstrap.min.js"></script>
	<!-- bootstrapValidator -->
	<script
		src="../../../jslib/bootstrap-validator/js/bootstrapValidator.min.js"></script>
	<script src="../../../jslib/bootstrap-validator/js/language/zh_CN.js"></script>
	<!-- SlimScroll -->
	<script src="../../../jslib/slimScroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="../../../jslib/fastclick/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="../../../jslib/adminlte/js/app.min.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="../../../jslib/adminlte/js/demo.js"></script>
	<!--Select2  -->
	<script src="../../../jslib/select2/select2.full.min.js"></script>
	<script src="../../../jslib/select2/i18n/zh-CN.js"></script>
	<script type="text/javascript" src="../../../jslib/leanway/jn_common.js"></script>
	<script type="text/javascript" src="../../../jslib/leanway/validate.js"></script>
	<!-- DataTables -->
	<script src="../../../jslib/datatables/jquery.dataTables.js"></script>
	<script src="../../../jslib/datatables/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="centerByUser.js"></script>
	<script src="../../../jslib/zTree/js/jquery.ztree.all-3.5.min.js"></script>
	<script type="text/javascript"
		src="../../../jslib/zTree/js/jquery.ztree.exedit-3.5.js"></script>
	<script type="text/javascript"
		src="../../../jslib/zTree/js/jquery.ztree.core-3.5.js"></script>
</body>
</html>
